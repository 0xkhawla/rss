<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Automatic encoding detection of XML files based using the recommended algorithm."><meta name="keywords" content="rust, rustlang, rust-lang, detect_encoding"><title>detect_encoding in quick_xml::encoding - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../normalize.css"><link rel="stylesheet" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../ayu.css" disabled><link rel="stylesheet" href="../../dark.css" disabled><link rel="stylesheet" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../main.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../quick_xml/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../quick_xml/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><div class="sidebar-elems"><h2><a href="index.html">In quick_xml::encoding</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Function <a href="../index.html">quick_xml</a>::<wbr><a href="index.html">encoding</a>::<wbr><a class="fn" href="#">detect_encoding</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/quick_xml/encoding.rs.html#128-142">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="item-decl"><pre class="rust fn"><code>pub fn detect_encoding(bytes: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.u8.html">u8</a>]) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.1/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;(&amp;'static <a class="struct" href="../../encoding_rs/struct.Encoding.html" title="struct encoding_rs::Encoding">Encoding</a>, <a class="primitive" href="https://doc.rust-lang.org/1.66.1/std/primitive.usize.html">usize</a>)&gt;</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Automatic encoding detection of XML files based using the
<a href="https://www.w3.org/TR/xml11/#sec-guessing">recommended algorithm</a>.</p>
<p>If encoding is detected, <code>Some</code> is returned with an encoding and size of BOM
in bytes, if detection was performed using BOM, or zero, if detection was
performed without BOM.</p>
<p>IF encoding was not recognized, <code>None</code> is returned.</p>
<p>Because the <a href="../../encoding_rs/index.html" title="encoding_rs"><code>encoding_rs</code></a> crate supports only subset of those encodings, only
the supported subset are detected, which is UTF-8, UTF-16 BE and UTF-16 LE.</p>
<p>The algorithm suggests examine up to the first 4 bytes to determine encoding
according to the following table:</p>
<div><table><thead><tr><th>Bytes</th><th>Detected encoding</th></tr></thead><tbody>
<tr><td><strong>BOM</strong></td><td></td></tr>
<tr><td><code>FE_FF_##_##</code></td><td>UTF-16, big-endian</td></tr>
<tr><td><code>FF FE ## ##</code></td><td>UTF-16, little-endian</td></tr>
<tr><td><code>EF BB BF</code></td><td>UTF-8</td></tr>
<tr><td><strong>No BOM</strong></td><td></td></tr>
<tr><td><code>00 3C 00 3F</code></td><td>UTF-16 BE or ISO-10646-UCS-2 BE or similar 16-bit BE (use declared encoding to find the exact one)</td></tr>
<tr><td><code>3C 00 3F 00</code></td><td>UTF-16 LE or ISO-10646-UCS-2 LE or similar 16-bit LE (use declared encoding to find the exact one)</td></tr>
<tr><td><code>3C 3F 78 6D</code></td><td>UTF-8, ISO 646, ASCII, some part of ISO 8859, Shift-JIS, EUC, or any other 7-bit, 8-bit, or mixed-width encoding which ensures that the characters of ASCII have their normal positions, width, and values; the actual encoding declaration must be read to detect which of these applies, but since all of these encodings use the same bit patterns for the relevant ASCII characters, the encoding declaration itself may be read reliably</td></tr>
</tbody></table>
</div></div></details></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="quick_xml" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.1 (90743e729 2023-01-10)" ></div></body></html>